---
import BlogLayout from '../../layouts/BlogLayout.astro';

// Definir la interfaz para el tipo Post
interface Post {
  id: number;
  title: string;
  content: string;
  excerpt?: string;
  publishedAt: string;
  image?: string;
}

// Usar datos estáticos de fallback para evitar problemas de conexión con la API durante el build
const fallbackPosts: Post[] = [
  { id: 1, title: 'Primer post de ejemplo', content: 'Este es el contenido del primer post de ejemplo.', publishedAt: new Date().toISOString() },
  { id: 2, title: 'Segundo post', content: 'Contenido del segundo post.', publishedAt: new Date().toISOString() },
  { id: 3, title: 'Tercer post', content: 'Contenido del tercer post.', publishedAt: new Date().toISOString() },
  { id: 4, title: 'Cuarto post', content: 'Contenido del cuarto post.', publishedAt: new Date().toISOString() },
  { id: 5, title: 'Quinto post', content: 'Contenido del quinto post.', publishedAt: new Date().toISOString() }
];

// En producción, intentaríamos obtener los datos de la API, pero para el build usamos los datos de fallback
const posts = fallbackPosts;
---
<BlogLayout title="Blog">
  <h1>Writings</h1>
  {posts.map((post: Post) => (
    <article>
      <h2><a href={`/blog/${post.id}`}>{post.title}</a></h2>
      <time datetime={post.publishedAt}>{new Date(post.publishedAt).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}</time>
      <p style="color: var(--text-secondary);">{post.excerpt || post.content.substring(0, 180)}...</p>
    </article>
  ))}
</BlogLayout>